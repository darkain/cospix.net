<?php

$user->requireLogin();




////////////////////////////////////////////////////////////////////////////////
//GET THE COMPLETE LIST OF TYPES
////////////////////////////////////////////////////////////////////////////////
require_once('types.php.inc');




////////////////////////////////////////////////////////////////////////////////
//GET THE ACTIVE TYPES FOR THE CURRENT USER
////////////////////////////////////////////////////////////////////////////////
$types = (new pudlObject($user['user_type'], PUDL_CSV))->flip();
$types->each(function(&$value){ $value = 1; });




////////////////////////////////////////////////////////////////////////////////
//RENDER ALL THE THINGS!
////////////////////////////////////////////////////////////////////////////////
$af	->load('_index.tpl')
		->block('usertypes',	$afusertypes)
		->field('types',		$types)
	->render();
