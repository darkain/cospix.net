<?php

////////////////////////////////////////////////////////////////////////////////
//VERIFY WE'RE LOGGED IN
////////////////////////////////////////////////////////////////////////////////
$user->requireLogin();




////////////////////////////////////////////////////////////////////////////////
//PULL THE MESSAGE FROM THE DATABASE
////////////////////////////////////////////////////////////////////////////////
\af\affirm(404,
	$message = $db->rowId('pudl_notification', 'notification_id', $get->id())
);




////////////////////////////////////////////////////////////////////////////////
//VERIFY WE'RE THE OWNER OF THE MESSAGE
////////////////////////////////////////////////////////////////////////////////
\af\affirm(401,
	$user->is($message['notification_user_to'])
);




////////////////////////////////////////////////////////////////////////////////
//MARK THE MESSAGE AS READ
////////////////////////////////////////////////////////////////////////////////
$db->updateId('pudl_notification', [
	'notification_read' => 1,
], 'notification_id', $message);




////////////////////////////////////////////////////////////////////////////////
//CONFIRM BACK TO THE BROWSER THAT EVERYTHING IS OKIE DOKIES!
////////////////////////////////////////////////////////////////////////////////
$af->ok();
