<?php

$user->requireAccessStaff('event', $event);

require_once('../event.php.inc');




////////////////////////////////////////////////////////////////////////////////
//PULL SELECTED ROOM
////////////////////////////////////////////////////////////////////////////////
$room = $db->rowId('pudl_schedule_room', 'schedule_room_id', $get->id());
\af\affirm(404, $room);
\af\affirm(422, $room['event_id'] === $event['event_id']);




////////////////////////////////////////////////////////////////////////////////
//CONFIRMED DELETE, SO DELETE THE ROOM!
////////////////////////////////////////////////////////////////////////////////
if ($get('confirm')) {
	$_GET['id'] = $_POST['id'] = 0;
	$db->deleteId('pudl_schedule_room', 'schedule_room_id', $room);
	return require('rooms.php');
}




////////////////////////////////////////////////////////////////////////////////
//SHOW CONFIRM DIALOG
////////////////////////////////////////////////////////////////////////////////
$af	->load('schedule/roomdelete.tpl')
		->field('event',	$event)
		->field('profile',	$profile)
		->field('room',		$room)
	->render();
